# Order Management System üöÄ‚ú®

Este proyecto es una aplicaci√≥n de gesti√≥n de pedidos para un sistema de comercio electr√≥nico, desarrollada como parte de un postulacion. Permite crear, leer, actualizar y eliminar pedidos, as√≠ como listar todos los pedidos y obtener detalles de un pedido espec√≠fico. Los productos y clientes se almacenan en bases de datos relacionales (PostgreSQL), mientras que los pedidos se almacenan en una base de datos no relacional (MongoDB).

## Integrante üë•üë®‚Äçüíª

| Nombre                     | Email                        | Usuario de GitHub    |
|----------------------------|------------------------------|----------------------|
| Jonathan Quilca Valenzuela | jqvalenzuela10@gmail.com.com | [jonyyy1](https://github.com/jonyyy1) |

## Descripci√≥n del Proyecto üìöüìÑ

La aplicaci√≥n permite:
- Crear, leer, actualizar y eliminar pedidos.
- Listar todos los pedidos.
- Obtener detalles de un pedido espec√≠fico.

Un pedido tiene un cliente, una lista de productos y un total. Los productos y clientes se almacenan en PostgreSQL, mientras que los pedidos se almacenan en MongoDB. Las operaciones de creaci√≥n y actualizaci√≥n de pedidos son transaccionales para asegurar la consistencia entre ambas bases de datos.

## Requisitos T√©cnicos üíªüîß

- **Base de Datos Relacional (PostgreSQL)**
  - Modelos: Cliente, Producto.
- **Base de Datos No Relacional (MongoDB)**
  - Modelo: Pedido.
- **Transacciones**
  - Las operaciones de creaci√≥n y actualizaci√≥n de pedidos aseguran consistencia entre ambas bases de datos.
- **Patrones de Dise√±o**
- **Implementaci√≥n Reactiva**
  - Usando Spring WebFlux.
- **Buenas Pr√°cticas**
  - Manejo adecuado de errores.
  - Validaci√≥n de entradas de usuario.
  - Tests unitarios.
- **Docker**
  - Contenedores para la aplicaci√≥n y bases de datos.

## Instalaci√≥n üíªüîß

1. Clonar el repositorio:
    ```sh
    git clone https://github.com/tu_usuario/order-management-system.git
    ```
2. Navegar al directorio del proyecto:
    ```sh
    cd order-management-system
    ```
3. En caso no tengas instalado gradle 
        
     ```sh
    brew install gradle
    ```
4. Una ves instalado gradle ejecutar el siguiente comando
    ```sh
      gradle wrapper
    ```
5. Construir el proyecto con Gradle (sin ejecutar pruebas):
    ```sh
      ./gradlew build -x test
    ```
   
5. Ejecutar los contenedores Docker con Docker Compose:
    ```sh
    docker-compose up --build
    ```

## Endpoints de la API üåê

### Crear un pedido

- **URL**: `POST /api/order`
  - **Request Body**:
  ```json
  {
      "customer": {
          "id": 1
      },
      "itemOrders": [
          {
              "product": {
                  "id": 1
                
              },
              "quantity": 2
          },
          {
              "product": {
                  "id": 2
              },
              "quantity": 1
          }
      ],
      "estado": "estado 1"
    }
    ```
- **Response**:
    - **Status**: `201 Created`
    - **Body**:
        ```json
        {
            "_id": "60d9f9f4e0e4c8b4d1e7f8b3",
            "cliente": {
                "id": 1,
                "nombre": "Juan Perez",
                "direccion": "Av. Siempre Viva 123",
                "email": "juan.perez@example.com"
            },
            "itemPedidos": [
                {
                    "producto": {
                        "id": 1,
                        "nombre": "Producto A",
                        "precio": 10.99,
                        "stock": 98
                    },
                    "cantidad": 2
                },
                {
                    "producto": {
                        "id": 102,
                        "nombre": "Producto B",
                        "precio": 5.49,
                        "stock": 47
                    },
                    "cantidad": 3
                }
            ],
            "fechaCreacion": "2024-06-01T10:00:00.000Z",
            "fechaActualizacion": "2024-06-01T10:00:00.000Z",
            "fechaEntrega": "2024-06-15",
            "estado": "estado 1"
        }
        ```

### Actualizar un pedido

- **URL**: `PUT /api/order/{id}`
  - **Request Body**:
      ```json
      {
          "customer": {
              "id": 1
          },
          "itemOrders": [
              {
                  "product": {
                      "id": 1
                  },
                  "quantity": 1
              },
              {
                  "product": {
                      "id": 2
                  },
                  "quantity": 1
              }
          ],
          "state": "estado 2"
    }
    ```
- **Response**:
    - **Status**: `200 OK`
    - **Body**:
        ```json
        {
            "_id": "60d9f9f4e0e4c8b4d1e7f8b3",
            "cliente": {
                "id": 1,
                "nombre": "Juan Perez",
                "direccion": "Av. Siempre Viva 123",
                "email": "juan.perez@example.com"
            },
            "itemPedidos": [
                {
                    "producto": {
                        "id": 101,
                        "nombre": "Producto A",
                        "precio": 10.99,
                        "stock": 93
                    },
                    "cantidad": 5
                },
                {
                    "producto": {
                        "id": 103,
                        "nombre": "Producto C",
                        "precio": 7.99,
                        "stock": 19
                    },
                    "cantidad": 1
                }
            ],
            "fechaCreacion": "2024-06-01T10:00:00.000Z",
            "fechaActualizacion": "2024-06-01T12:00:00.000Z",
            "fechaEntrega": "2024-06-20",
            "estado": false
        }
        ```

### Eliminar un pedido

- **URL**: `DELETE /orders/{id}`
- **Response**:
    - **Status**: `204 No Content`

### Obtener un pedido por ID

- **URL**: `GET /orders/{id}`
- **Response**:
    - **Status**: `200 OK`
    - **Body**:
        ```json
        {
            "_id": "60d9f9f4e0e4c8b4d1e7f8b3",
            "cliente": {
                "id": 1,
                "nombre": "Juan Perez",
                "direccion": "Av. Siempre Viva 123",
                "email": "juan.perez@example.com"
            },
            "itemPedidos": [
                {
                    "producto": {
                        "id": 101,
                        "nombre": "Producto A",
                        "precio": 10.99,
                        "stock": 93
                    },
                    "cantidad": 5
                },
                {
                    "producto": {
                        "id": 103,
                        "nombre": "Producto C",
                        "precio": 7.99,
                        "stock": 19
                    },
                    "cantidad": 1
                }
            ],
            "fechaCreacion": "2024-06-01T10:00:00.000Z",
            "fechaActualizacion": "2024-06-01T12:00:00.000Z",
            "fechaEntrega": "2024-06-20",
            "estado": false
        }
        ```

### Listar todos los pedidos

- **URL**: `GET /orders`
- **Response**:
    - **Status**: `200 OK`
    - **Body**:
        ```json
        [
            {
                "_id": "60d9f9f4e0e4c8b4d1e7f8b3",
                "cliente": {
                    "id": 1,
                    "nombre": "Juan Perez",
                    "direccion": "Av. Siempre Viva 123",
                    "email": "juan.perez@example.com"
                },
                "itemPedidos": [
                    {
                        "producto": {
                            "id": 101,
                            "nombre": "Producto A",
                            "precio": 10.99,
                            "stock": 93
                        },
                        "cantidad": 5
                    },
                    {
                        "producto": {
                            "id": 103,
                            "nombre": "Producto C",
                            "precio": 7.99,
                            "stock": 19
                        },
                        "cantidad": 1
                    }
                ],
                "fechaCreacion": "2024-06-01T10:00:00.000Z",
                "fechaActualizacion": "2024-06-01T12:00:00.000Z",
                "fechaEntrega": "2024-06-20",
                "estado": false
            },
            {
                "_id": "60d9fa2ae0e4c8b4d1e7f8b4",
                "cliente": {
                    "id": 2,
                    "nombre": "Maria Gomez",
                    "direccion": "Calle Falsa 456",
                    "email": "maria.gomez@example.com"
                },
                "itemPedidos": [
                    {
                        "producto": {
                            "id": 104,
                            "nombre": "Producto D",
                            "precio": 12.99,
                            "stock": 30
                        },
                        "cantidad": 2
                    }
                ],
                "fechaCreacion": "2024-06-01T11:00:00.000Z",
                "fechaActualizacion": "2024-06-01T11:00:00.000Z",
                "fechaEntrega": "2024-06-15",
                "estado": true
            }
        ]
        ```
## Estructura del Proyecto üìÇ

```
    order-management-system/
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ java/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ com/keola/ordermanagement/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ controller/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ exception/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ model/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ repository/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ service/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ resources/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ migration/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ application.properties
‚îÇ   ‚îú‚îÄ‚îÄ test/
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ docker-compose.yml
‚îÇ   ‚îî‚îÄ‚îÄ README.md
```


## Dataset üìäüìÇ

Los datos de productos y clientes se almacenan en PostgreSQL, y los datos de pedidos en MongoDB. Aseg√∫rate de que las bases de datos est√©n configuradas y en funcionamiento.

## License üìùüìú

Este proyecto est√° licenciado bajo el archivo [LICENSE](LICENSE).

¬°Feliz codificaci√≥n! ‚ú®üë©‚Äçüíªüë®‚Äçüíª


Este README.md incluye ejemplos detallados de solicitudes y respuestas para cada uno de los endpoints de la API, lo que deber√≠a facilitar la comprensi√≥n de c√≥mo interactuar con la API. Aseg√∫rate de ajustar los ejemplos y detalles espec√≠ficos seg√∫n tu implementaci√≥n y estructura del proyecto.
